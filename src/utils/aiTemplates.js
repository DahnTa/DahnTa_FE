// ë°±ì—”ë“œì— ì‚¬ì „ ì €ìž¥ëœ AI ë¶„ì„ì„ í‰ë‚´ ë‚´ëŠ” ëª©ì—… ë°ì´í„°
const DEFAULT_ANALYSES = {
  integrated: (stockName) =>
    `í†µí•© ë¶„ì„ (Gemini)\n- í•µì‹¬ í¬ì¸íŠ¸: ê°€ê²© ëª¨ë©˜í…€, ìˆ˜ê¸‰, ë‰´ìŠ¤, ìž¬ë¬´ ë°ì´í„°ë¥¼ í†µí•©í•œ ë°±ì—”ë“œ ì €ìž¥ë³¸ìž…ë‹ˆë‹¤.\n- ${stockName}ì— ëŒ€í•œ ì¤‘ê¸° ë·°: ë³€ë™ì„±ì„ ê°ì•ˆí•´ ë¶„í•  ë§¤ìˆ˜Â·ë¶„í•  ë§¤ë„ ì „ëžµì´ ê¶Œìž¥ë©ë‹ˆë‹¤.\n- í¬ì§€ì…˜ ì œì•ˆ: ëª©í‘œ ë¹„ì¤‘ 10~15%, ì†ìµ ê¸°ì¤€ ìž¬ì¡°ì • ì£¼ê¸° 5ì¼.`,
  news: (stockName) =>
    `ë‰´ìŠ¤ ë¶„ì„ (Gemini)\n- ìµœì‹  í—¤ë“œë¼ì¸ í•µì‹¬ë§Œ ìš”ì•½í•œ ì €ìž¥ë³¸ìž…ë‹ˆë‹¤.\n- ${stockName} ê´€ë ¨ ì£¼ìš” ì´ìŠˆë¥¼ ê¸ì •/ë¶€ì •/ì¤‘ë¦½ìœ¼ë¡œ ë¶„ë¥˜í•œ ë’¤, ê³¼ê±° ë°˜ì‘ ëŒ€ë¹„ ì˜í–¥ì„ ì ìˆ˜í™”í–ˆìŠµë‹ˆë‹¤.\n- ì œì•ˆ: ì´ë²¤íŠ¸ ì „í›„ ë³€ë™ì„± í™•ëŒ€ ê°€ëŠ¥. í¬ì§€ì…˜ ì¶•ì†Œ í›„ ìž¬ì§„ìž… ê³ ë ¤.`,
  reddit: (stockName) =>
    `Reddit ì„¼í‹°ë¨¼íŠ¸ (Gemini)\n- r/stocks, r/investing ë“± ì£¼ìš” ìŠ¤ë ˆë“œì˜ ì§€ë‚œ 48ì‹œê°„ ê°ì„± ìŠ¤ëƒ…ìƒ·ì„ ì €ìž¥í–ˆìŠµë‹ˆë‹¤.\n- ${stockName}ì— ëŒ€í•œ ì–¸ê¸‰ëŸ‰ ì¦ê°ê³¼ ìƒìœ„ í‚¤ì›Œë“œ, ì°¬ë°˜ ë¹„ìœ¨ì„ ë°˜ì˜í–ˆìŠµë‹ˆë‹¤.\n- ì œì•ˆ: ê³¼ì—´ êµ¬ê°„ì—ì„œëŠ” ë‹¨ê¸° ë³€ë™ì„± ìœ„í—˜ì„ ê°ì•ˆí•œ ì†Œê·œëª¨ í¬ì§€ì…˜ ìœ ì§€.`,
  financial: (stockName) =>
    `ìž¬ë¬´ì œí‘œ ë¶„ì„ (Gemini)\n- ìµœê·¼ 4ê°œ ë¶„ê¸° ìž¬ë¬´ì™€ ì—°ê°„ ê°€ì´ë˜ìŠ¤ë¥¼ ì •ê·œí™”í•œ ë°±ì—”ë“œ ê²°ê³¼ìž…ë‹ˆë‹¤.\n- ${stockName}ì˜ ë§¤ì¶œ ì„±ìž¥ë¥ , FCF ë§ˆì§„, ë¶€ì±„ë¹„ìœ¨ì„ ì ê²€í–ˆê³ , ì˜ì—…í˜„ê¸ˆíë¦„ ê°œì„ ì´ ì§€ì†ë˜ëŠ”ì§€ í™•ì¸í–ˆìŠµë‹ˆë‹¤.\n- ì œì•ˆ: ì‹¤ì  ëª¨ë©˜í…€ì´ ìœ ì§€ë˜ëŠ” ë™ì•ˆ ë³´ìœ , ë§ˆì§„ í›¼ì† ì‹œ ìµì ˆ/ì†ì ˆ íŠ¸ë¦¬ê±° ìž¬ì„¤ì •.`,
  macro: (stockName) =>
    `ê±°ì‹œê²½ì œ ë¶„ì„ (Gemini)\n- ê¸ˆë¦¬, ë‹¬ëŸ¬ ì¸ë±ìŠ¤, ìœ ê°€, ë°˜ë„ì²´ ì‚¬ì´í´ ë“± ê±°ì‹œ ë³€ìˆ˜ì™€ ${stockName}ì˜ ìƒê´€ë„ë¥¼ ì‚¬ì „ì— ê³„ì‚°í–ˆìŠµë‹ˆë‹¤.\n- ê¸°ë³¸ ì‹œë‚˜ë¦¬ì˜¤: ì™„ë§Œí•œ ë””ìŠ¤ì¸í”Œë ˆì´ì…˜, ì •ì±… ê¸ˆë¦¬ ë™ê²°. ë¦¬ìŠ¤í¬ ì‹œë‚˜ë¦¬ì˜¤: ê²½ê¸° ë‘”í™” ì‹¬í™”.\n- ì œì•ˆ: ê±°ì‹œ ë¦¬ìŠ¤í¬ í—¤ì§€ ë¹„ì¤‘ 20% ìœ ì§€, ì´ë²¤íŠ¸ ì£¼ê°„ì—ëŠ” í¬ì§€ì…˜ ì¶•ì†Œ.`,
};

const STOCK_SPECIFIC_ANALYSES = {
  S1: {
    integrated:
      "ì—”ë¹„ë””ì•„ í†µí•© ë¶„ì„ (Gemini)\n- AI ê°€ì†ê¸° ìˆ˜ìš”ì™€ ASP ì¸ìƒë¶„ì„ ë°˜ì˜í•œ ì €ìž¥ë³¸ìž…ë‹ˆë‹¤.\n- ë°ì´í„°ì„¼í„° ìˆ˜ìš”ê°€ ê²¬ì¡°í•´ ì¤‘ê¸° ì—…ì‚¬ì´ë“œê°€ ìœ ì§€ë˜ë‚˜, ê³µê¸‰ ì œì•½ ì™„í™” ì‹œ ë‹¨ê¸° ë³€ë™ì„± í™•ëŒ€ ê°€ëŠ¥.\n- ì œì•ˆ: ëª©í‘œ ë¹„ì¤‘ 15%, ë³€ë™ì„± ìŠ¤íŒŒì´í¬ ì‹œ ë¶„í•  ë§¤ìˆ˜ë¡œ í‰ê· ë‹¨ê°€ ê´€ë¦¬.",
    reddit:
      "ì—”ë¹„ë””ì•„ Reddit ë¶„ì„ (Gemini)\n- r/nvidia, r/pcmasterrace ì–¸ê¸‰ì´ ê¸‰ì¦í–ˆìœ¼ë©°, ê¸ì • í‚¤ì›Œë“œê°€ 68%ë¡œ ìš°ì„¸.\n- ì˜µì…˜ ê°¤ëŸ­ì‹œ ê¸€ì´ ëŠ˜ì–´ ë³€ë™ì„± ê²½ê³  ì‹ í˜¸ë„ í•¨ê»˜ í¬ì°©.\n- ì œì•ˆ: ì˜µì…˜ ë§Œê¸° ì „í›„ ë¸íƒ€/ê°ë§ˆ ì›€ì§ìž„ ì£¼ì˜, í˜„ë¬¼ ë¹„ì¤‘ë§Œ ìœ ì§€.",
  },
  S6: {
    news:
      "ë©”íƒ€ í”Œëž«í¼ìŠ¤ ë‰´ìŠ¤ ë¶„ì„ (Gemini)\n- ê´‘ê³  ìˆ˜ìš” íšŒë³µ ë° ë¹„ìš© íš¨ìœ¨í™” ê´€ë ¨ ê¸ì • í—¤ë“œë¼ì¸ ë¹„ì¤‘ì´ 62%.\n- ê·œì œ/í”„ë¼ì´ë²„ì‹œ ê´€ë ¨ ì¤‘ë¦½~ë¶€ì • ê¸°ì‚¬ë„ ë™ë°˜ë˜ì–´ ë°©í–¥ì„± í˜¼ì¡°.\n- ì œì•ˆ: ì‹¤ì  ë°œí‘œ ì „ ì´ë²¤íŠ¸ ë¦¬ìŠ¤í¬ ê´€ë¦¬, ë°œí‘œ í›„ ì¶”ì„¸ í™•ì¸ í›„ ì¦ì•¡.",
    integrated:
      "ë©”íƒ€ í”Œëž«í¼ìŠ¤ í†µí•© ë¶„ì„ (Gemini)\n- ë¦¬ì–¼ìŠ¤Â·ê´‘ê³  ì•Œê³ ë¦¬ì¦˜ ê°œì„  íš¨ê³¼ê°€ ë°˜ì˜ëœ ì‚¬ì „ ë¶„ì„ë³¸ìž…ë‹ˆë‹¤.\n- MAU/ARPU ê°œì„ ì´ ì´ì–´ì§€ëŠ” í•œ ì¤‘ë¦½ ì´ìƒ ë·° ìœ ì§€.\n- ì œì•ˆ: ë‹¨ê¸° ì¡°ì • ì‹œ ë§¤ìˆ˜, ì¤‘ìž¥ê¸° ë¹„ì¤‘ 12% ë‚´ ê´€ë¦¬.",
  },
  S9: {
    financial:
      "ë²„í¬ì…” í•´ì„œì›¨ì´ ìž¬ë¬´ì œí‘œ ë¶„ì„ (Gemini)\n- ë³´í—˜ í”Œë¡œíŠ¸ í™•ëŒ€ì™€ í˜„ê¸ˆ í¬ì§€ì…˜, ìžì‚¬ì£¼ ë§¤ìž… ê¸°ì¡°ë¥¼ ë°˜ì˜í–ˆìŠµë‹ˆë‹¤.\n- íˆ¬ìž í¬íŠ¸í´ë¦¬ì˜¤ ê°€ì¹˜ ë³€ë™ì„±ì´ ì»¤ ë‹¨ê¸° ìˆ˜ìµë¥ ì€ í›„í–‰ì .\n- ì œì•ˆ: ê³µê²©ì  ë§¤ìˆ˜ë³´ë‹¤ëŠ” ìž¥ê¸° ë³´ìœ  ê´€ì , í˜„ê¸ˆíë¦„ ì•ˆì •ì„±ì— ë² íŒ….",
    macro:
      "ë²„í¬ì…” í•´ì„œì›¨ì´ ê±°ì‹œê²½ì œ ë¶„ì„ (Gemini)\n- ê¸ˆë¦¬ ìƒìŠ¹ êµ­ë©´ì—ì„œë„ ë³´í—˜ ì–¸ë”ë¼ì´íŒ… ë§ˆì§„ì´ ë°©ì–´ì .\n- ìž¥ê¸° êµ­ì±„ ìˆ˜ìµë¥  ë³€ë™ì´ í¬íŠ¸í´ë¦¬ì˜¤ ê°€ì¹˜ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì´ í¼.\n- ì œì•ˆ: ê¸ˆë¦¬ í”¼í¬ì•„ì›ƒ êµ¬ê°„ì—ì„œëŠ” ì¶”ê°€ ë¹„ì¤‘ í™•ëŒ€ ì—¬ì§€.",
  },
};

export const getStoredAIAnalysis = (personaId, stockId, stockName) => {
  const stockAnalyses = STOCK_SPECIFIC_ANALYSES[stockId];
  if (stockAnalyses && stockAnalyses[personaId]) {
    return stockAnalyses[personaId];
  }

  const template = DEFAULT_ANALYSES[personaId] || DEFAULT_ANALYSES.integrated;
  return template(stockName);
};

// ë‰´ìŠ¤ í—¤ë“œë¼ì¸ í…œí”Œë¦¿
export const generateNewsHeadline = (stockName, changeRate) => {
  const headlines = {
    positive_high: [
      `ðŸš€ ${stockName} ê¸‰ë“±! íˆ¬ìžìžë“¤ í™˜í˜¸ì„± "ë‹¤ìŒ í…ŒìŠ¬ë¼ íƒ„ìƒ?"`,
      `ðŸ“ˆ ${stockName}, í•˜ë£¨ ë§Œì— ${Math.abs(changeRate).toFixed(1)}% í­ë“±! ì‹œìž¥ ë“¤ì©`,
      `ðŸ”¥ ${stockName} ìƒí•œê°€ ê·¼ì ‘! "ì§€ê¸ˆì´ ë§ˆì§€ë§‰ ê¸°íšŒ" ì „ë¬¸ê°€ í•œëª©ì†Œë¦¬`,
      `ðŸ’° ${stockName} ëŒí’! ê°œë¯¸íˆ¬ìžìžë“¤ ëŒ€ë°• í–‰ì§„`,
      `âš¡ ${stockName} ê¸‰ë“±ì— ì¦ê¶Œê°€ ê¸´ê¸‰ë¶„ì„ "ë°¸ë¥˜ì—ì´ì…˜ ìž¬í‰ê°€ ì‹œìž‘"`,
    ],
    positive_low: [
      `ðŸ“Š ${stockName}, ì™„ë§Œí•œ ìƒìŠ¹ì„¸ ì§€ì†... ì•ˆì •ì  ìˆ˜ìµ ê¸°ëŒ€`,
      `âœ… ${stockName} ê¾¸ì¤€í•œ ìƒìŠ¹ "ìž¥ê¸° íˆ¬ìž ë§¤ë ¥ë„ UP"`,
      `ðŸŽ¯ ${stockName}, ì¡°ìš©í•œ ê°•ì„¸... ì €í‰ê°€ ë…¼ëž€`,
      `ðŸ“ˆ ${stockName} ë‹¨ê³„ì  ìƒìŠ¹, ì „ë¬¸ê°€ "ê±´ì „í•œ ìƒìŠ¹ì„¸"`,
    ],
    negative_high: [
      `ðŸ’¥ ${stockName} ${Math.abs(changeRate).toFixed(1)}% ê¸‰ë½! ë¬´ìŠ¨ ì¼ì´?`,
      `âš ï¸ ${stockName} í­ë½ì— ì‹œìž¥ íŒ¨ë‹‰ "ì†ì ˆ ëŸ¬ì‹œ"`,
      `ðŸ˜± ${stockName} ì¶”ë½... ê°œë¯¸íˆ¬ìžìž "ë©˜ë¶•"`,
      `ðŸ“‰ ${stockName} ì•…ìž¬ì— ì§ê²©íƒ„! ê¸‰ë§¤ë¬¼ ìŸì•„ì ¸`,
      `ðŸ”´ ${stockName} ê¸‰ë½ "ë²„ë¸” ë¶•ê´´ ì‹œìž‘?" ìš°ë ¤ í™•ì‚°`,
    ],
    negative_low: [
      `ðŸ“‰ ${stockName} í•˜ë½ì„¸... íˆ¬ìžì‹¬ë¦¬ ìœ„ì¶•`,
      `ðŸ˜Ÿ ${stockName}, ì¡°ì • êµ­ë©´ ì§„ìž… "ì €ê°€ ë§¤ìˆ˜ ê¸°íšŒ?"`,
      `â¬‡ï¸ ${stockName} ì†Œí­ í•˜ë½, ì‹œìž¥ "ê´€ë§ì„¸ ìš°ì„¸"`,
      `ðŸ“Š ${stockName} ì•½ì„¸ ì§€ì†... ë°˜ë“± ì‹œì ì€?`,
    ],
    neutral: [
      `ðŸ˜ ${stockName} ë³´í•©ì„¸... ë°©í–¥ì„± ì°¾ê¸° ì¤‘`,
      `ðŸ“Š ${stockName} íš¡ë³´ìž¥ ì§€ì† "ê¸°ë‹¤ë¦¼ì˜ ë¯¸í•™"`,
      `âš–ï¸ ${stockName} ê· í˜• ìœ ì§€... ë‹¤ìŒ ì›€ì§ìž„ì— ì£¼ëª©`,
      `ðŸ” ${stockName} ë³€ë™ì„± ì¶•ì†Œ, ì‹œìž¥ "ìˆ¨ê³ ë¥´ê¸°"`,
    ],
  };

  let category;
  if (changeRate > 5) category = 'positive_high';
  else if (changeRate > 0) category = 'positive_low';
  else if (changeRate < -5) category = 'negative_high';
  else if (changeRate < 0) category = 'negative_low';
  else category = 'neutral';

  const options = headlines[category];
  const randomIndex = Math.floor(Math.random() * options.length);
  return options[randomIndex];
};

